<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker Getting Started 01 | Dali&#39;s devLog</title>
    <meta name="description" content="TIL">
    
    
    <link rel="preload" href="/learning-note/assets/css/0.styles.4fc89262.css" as="style"><link rel="preload" href="/learning-note/assets/js/app.80c35667.js" as="script"><link rel="preload" href="/learning-note/assets/js/2.90274bcd.js" as="script"><link rel="preload" href="/learning-note/assets/js/14.8cd09e9b.js" as="script"><link rel="prefetch" href="/learning-note/assets/js/10.6076d589.js"><link rel="prefetch" href="/learning-note/assets/js/11.44773784.js"><link rel="prefetch" href="/learning-note/assets/js/12.84b5e907.js"><link rel="prefetch" href="/learning-note/assets/js/13.351dc790.js"><link rel="prefetch" href="/learning-note/assets/js/15.1a30e0c7.js"><link rel="prefetch" href="/learning-note/assets/js/16.d2a86fa0.js"><link rel="prefetch" href="/learning-note/assets/js/17.7afeceb3.js"><link rel="prefetch" href="/learning-note/assets/js/18.a8c13e93.js"><link rel="prefetch" href="/learning-note/assets/js/19.e87bc44c.js"><link rel="prefetch" href="/learning-note/assets/js/20.db183e7e.js"><link rel="prefetch" href="/learning-note/assets/js/21.fd8e72bc.js"><link rel="prefetch" href="/learning-note/assets/js/22.912b052c.js"><link rel="prefetch" href="/learning-note/assets/js/23.db2264de.js"><link rel="prefetch" href="/learning-note/assets/js/24.6db1c5d0.js"><link rel="prefetch" href="/learning-note/assets/js/25.ddd88253.js"><link rel="prefetch" href="/learning-note/assets/js/26.54db0373.js"><link rel="prefetch" href="/learning-note/assets/js/27.ba0801ee.js"><link rel="prefetch" href="/learning-note/assets/js/28.ad4f06dd.js"><link rel="prefetch" href="/learning-note/assets/js/29.2b5db989.js"><link rel="prefetch" href="/learning-note/assets/js/3.bed7b99c.js"><link rel="prefetch" href="/learning-note/assets/js/4.e5a590ac.js"><link rel="prefetch" href="/learning-note/assets/js/5.1b350fe4.js"><link rel="prefetch" href="/learning-note/assets/js/6.38e8c98e.js"><link rel="prefetch" href="/learning-note/assets/js/7.7339feaf.js"><link rel="prefetch" href="/learning-note/assets/js/8.fc336295.js"><link rel="prefetch" href="/learning-note/assets/js/9.4420ec65.js">
    <link rel="stylesheet" href="/learning-note/assets/css/0.styles.4fc89262.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learning-note/" class="home-link router-link-active"><!----> <span class="site-name">Dali's devLog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Base</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning-note/git.html" class="sidebar-link">Git</a></li><li><a href="/learning-note/docker.html" class="active sidebar-link">Docker Getting Started 01</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning-note/docker.html#docker-getting-started-01" class="sidebar-link">Docker Getting Started 01</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ETC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dali</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="docker-getting-started-01"><a href="#docker-getting-started-01" aria-hidden="true" class="header-anchor">#</a> Docker Getting Started 01</h2> <p>이 주제를 잡게 된 이유?
1.Why? 최근에 개발 환경을 세팅할 때 가장 많이 쓰는 도구인 것 같고, 자연스레 많이 접하기는 하는데 모르는 것 투성이라 공부하고 싶었다.</p> <h3 id="docker"><a href="#docker" aria-hidden="true" class="header-anchor">#</a> DOCKER</h3> <p><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener noreferrer">docker-doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>docker란 무엇일까?</p> <p>Docker는 개발자와 시스템 관리자가 컨테이너를 사용하여 응용 프로그램을 개발, 배포 및 실행하기위한 플랫폼입니다.</p> <p>Linux 컨테이너를 사용하여 응용 프로그램을 배포하는 것을 컨테이너 화라고합니다. 컨테이너는 새로운 것은 아니지만 쉽게 응용 프로그램을 배포하는 데 사용됩니다.</p> <p>기존에 가상화 기술에 비해서 빠르고 경량화 되었다고 한다.</p> <p>컨테이너화 시켜놓으면 다른데다 가져다 쓰기 아주 좋음</p> <h3 id="공식-문서-getting-started-따라가기"><a href="#공식-문서-getting-started-따라가기" aria-hidden="true" class="header-anchor">#</a> 공식 문서 Getting Started 따라가기</h3> <p>1: Orientation
2: Containers
3: Services
4: Swarms
5: Stacks
6: Deploy your app</p> <h3 id="_1-orientation"><a href="#_1-orientation" aria-hidden="true" class="header-anchor">#</a> 1. Orientation</h3> <p>1.1
컨테이너를 사용한 배포 플랫폼 &amp; 장점들
유연하고 경량화 되어 있고 쌓기 좋고 ....등등</p> <p>1.2. Image and Containers</p> <p>컨테이너는 이미지를 실행시키면서 동작합니다.
이 이미지는 실행시키기 위한 설정 파일등 이라고 합니다.
(the code, a runtime, libraries, environment variables, and configuration files.)</p> <p>컨테이너는 이미지의 런타임 인스턴스</p> <p><code>docker ps</code>로 실행중인 컨테이너 목록을 볼 수 있다
<code>docker --version</code> version 과 client server 정보를 볼 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>docker --version
Docker version 18.09.2, build 6247962
docker version
Client: Docker Engine - Community
 Version:           18.09.2
 API version:       1.39
 Go version:        go1.10.8
 Git commit:        6247962
 Built:             Sun Feb 10 04:12:39 2019
 OS/Arch:           darwin/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          18.09.2
  API version:      1.39 (minimum version 1.12)
  Go version:       go1.10.6
  Git commit:       6247962
  Built:            Sun Feb 10 04:13:06 2019
  OS/Arch:          linux/amd64
  Experimental:     false
</code></pre></div><p><code>docker run hello-world</code>를 입력하자
image가 로컬에는 없다. 하고 -&gt; image를 가져온다고 한다.
그리고 docker client가 docker daemon과 핑퐁하면서
실행환경 준비를 마친다.</p> <p>image들은 <code>docker-hub</code>에 있나보다.</p> <h3 id="dokcerhub"><a href="#dokcerhub" aria-hidden="true" class="header-anchor">#</a> DokcerHub</h3> <p>github 처럼 dokcer image들의 저장소
docker hub에 들어가보자 😄
<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">docker-hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://user-images.githubusercontent.com/25189066/61185414-3705ac00-a694-11e9-8394-f5e1c83fdd2f.png" alt="docker-hub">
(repo에는 (star | 몇 번 pull했는지가 나온다))</p> <p>접속해보면 내가 만든 repository
그리고 검색을 통해서 image들을 찾을 수 있다.</p> <p><code>ubuntu</code>를 검색해보자</p> <p>cli 환경에서도 똑같이
<code>docker search</code>라는 명령어로 알아볼수가 있다.</p> <p>실행하면서 몇가지 명령어들을 익혀 봅시다.</p> <p><code>docker pull ubuntu</code> pull image 가지고 오기
<code>docker run ubuntu</code> 이미지 실행하기
<code>docker run -d</code> demon으로 실행하겠다.
<code>docker run -i</code> interactive mode로 하겠다.
<code>docker run -t</code> tty기능을 키겠다.</p> <p><code>docker run -dit name &lt;my-name&gt; &lt;imagename&gt;</code></p> <p><code>docker ps</code> 실행되고 있는 컨테이너
<code>docker ps -a</code> all 컨테이너
<code>docker rm Remove one or more containers</code> <code>docker image ls</code> 다운로드한 image 목록으 볼 수 있다.
<code>docker container ls --all</code></p> <p><code>docker run -dit --name my-ubuntu ubuntu</code></p> <p><code>docker attach &lt;container-name&gt;</code><br> <code>docker inspect &lt;container-name&gt;</code></p> <h3 id="_1-orientation-정리"><a href="#_1-orientation-정리" aria-hidden="true" class="header-anchor">#</a> 1.orientation 정리</h3> <p>컨테이너화는 cI/cd를 간편하게 만들어준다.</p> <ol><li>시스템 종속성이 없다.</li> <li>업데이트를 모든 부분에 푸시할 수 있다.</li> <li>자원을 최적화 할 수 있다.</li> <li>vmHost를 실행시키지 않고 새로운 실행 파일 작성할 수 있다.</li></ol> <p>만능은 아니고</p> <ol><li>엄밀한 리눅스 내부 환경 구성 이나 비리눅스 환경에서는 예전
VMWare나 VirtualBox 방식이 더 적합할 수 있다.</li></ol> <h3 id="_2-containers"><a href="#_2-containers" aria-hidden="true" class="header-anchor">#</a> 2.Containers</h3> <p>제일 하단에 컨테이너에 대해서 알아봅시다.</p> <div class="language- extra-class"><pre class="language-text"><code>Stack
Services
Container (you are here)
</code></pre></div><p>Docker는 같은 Portable image만 설정해주면 모두 같은 실행환경을 갖출 수 있어서 편리하다.
Portable Images는 Dockerfile이라고도 한다.</p> <p>Docker 방식으로 앱을 제작해보자
제일 아래 부터 쌓아 올리는 식으로 진행할 예정
파트 3 컨테이너 프로덕션에서 작용하는 방식
최상위 레벨 스택 모든 서비스의 상호 작용</p> <h4 id="app-build"><a href="#app-build" aria-hidden="true" class="header-anchor">#</a> app.build</h4> <p>docker build Build an image from a Dockerfile</p> <p><code>docker build --tag=friendlyhello .</code></p> <p>dockerFile을 통해서 --tag -&gt; 이 이름으로 이미지를 만들겠다는 명령어다.</p> <h3 id="run-app"><a href="#run-app" aria-hidden="true" class="header-anchor">#</a> run App</h3> <p>docker run Run a command in a new container
<code>docker run -p 4000:80 friendlyhello</code>
-p: Publish a container's port(s) tothe host
publish port 지정 내쪽 4000 컨테이너는 80포트로 돌리겠다
machine’s port 4000 to the container’s published port 80 using</p> <p><code>docker container ls</code>를 통해서 상태들을 확인 할 수 있다.
<code>docker container stop &lt;id&gt;</code>를 통해서 멈출 수 있다.</p> <h3 id="share-image"><a href="#share-image" aria-hidden="true" class="header-anchor">#</a> Share Image</h3> <p><code>docker login</code>
로그인 하고
<code>docker tag image username/repository:tag</code> <code>docker tag friendlyhello gordon/get-started:part2</code>
docker tag imagename username/repository:</p> <p>docker tag imagename -&gt; usernmae/repository:tag으로 생성하고
docker push usernmae/repository:tag 허브에 생성한 이미지를 push해준다.</p> <div class="language- extra-class"><pre class="language-text"><code>docker build -t friendlyhello .  # Create image using this directory's Dockerfile
docker run -p 4000:80 friendlyhello  # Run &quot;friendlyhello&quot; mapping port 4000 to 80
docker run -d -p 4000:80 friendlyhello         # Same thing, but in detached mode
docker container ls                                # List all running containers
docker container ls -a             # List all containers, even those not running
docker container stop &lt;hash&gt;           # Gracefully stop the specified container
docker container kill &lt;hash&gt;         # Force shutdown of the specified container
docker container rm &lt;hash&gt;        # Remove specified container from this machine
docker container rm $(docker container ls -a -q)         # Remove all containers
docker image ls -a                             # List all images on this machine
docker image rm &lt;image id&gt;            # Remove specified image from this machine
docker image rm $(docker image ls -a -q)   # Remove all images from this machine
docker login             # Log in this CLI session using your Docker credentials
docker tag &lt;image&gt; username/repository:tag  # Tag &lt;image&gt; for upload to registry
docker push username/repository:tag            # Upload tagged image to registry
docker run username/repository:tag                   # Run image from a registry

</code></pre></div><h3 id="service"><a href="#service" aria-hidden="true" class="header-anchor">#</a> Service</h3> <p>Stack
Services (you are here)
Container</p> <p>이번엔 서비스에 대해서 알아보겠다.</p> <p>분산 앱에서 app의 다른 조각 ?
예를 들면 비디오공유 사이트에서
데이터 베이스에서 응용프로그램을 저장하는 서비스
사용자가 업로드를 한 후에 비디오 트렌스코딩을 위한 서비스 ...</p> <p>여러 앱의 기능단위인가? 서비스가 무엇을 뜻하는지 아직 와 닿지는 않는다. ... 마이크로 서비스 같은 개념인가? -&gt; 나중에 공부해서 채워넣기</p> <p>서비스는 실제로 프로덕션 컨테이너이다.
하나의 이미지를 실행하지만 어떤 포트가 사용되야 하는지, 복제본 양을 어떻게 실행해야 할지, 용량이 어떻게 될지, ...
이런 것들은 docker-compose.yml을 작성하여 서비스를 정의 실행 및 확장할 수 있다.</p> <h4 id="docker-compose-yml"><a href="#docker-compose-yml" aria-hidden="true" class="header-anchor">#</a> docker-compose.yml</h4> <div class="language- extra-class"><pre class="language-text"><code>version: &quot;3&quot;
services:
  web:
    # replace username/repo:tag with your name and image details
    image: username/repo:tag
    deploy:
      replicas: 5
      resources:
        limits:
          cpus: &quot;0.1&quot;
          memory: 50M
      restart_policy:
        condition: on-failure
    ports:
      - &quot;4000:80&quot;
    networks:
      - webnet
networks:
  webnet:
</code></pre></div><p>가지고 올 image 몇개로 실행할지 limits (cpu &amp; memory )
실패시 즉시 재 실행 ,포트 정의 로드 밸런스 등을 정의한다.</p> <h4 id="run-your-new-load-balanced-app"><a href="#run-your-new-load-balanced-app" aria-hidden="true" class="header-anchor">#</a> Run your new load-balanced app</h4> <p>docker stack deploy
<code>docker swarm init</code>
이 명령에 대한 부분은 Swarms에서 다루고 진행해보자</p> <p><code>docker stack deploy -c docker-compose.yml getstartedlab</code></p> <h3 id="reference"><a href="#reference" aria-hidden="true" class="header-anchor">#</a> Reference</h3> <ul><li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener noreferrer">도커란 무엇인가?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/learning-note/git.html" class="prev">
          Git
        </a></span> <span class="next"><a href="/learning-note/elint-prettier-lint-staged.html">
          ESlint - Prettier - Lint-Staged-Husky  적용기
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/learning-note/assets/js/app.80c35667.js" defer></script><script src="/learning-note/assets/js/2.90274bcd.js" defer></script><script src="/learning-note/assets/js/14.8cd09e9b.js" defer></script>
  </body>
</html>
